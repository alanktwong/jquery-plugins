<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>jQuery Logger: Demo Page for Custom Logger</title>
	
	<script type="text/javascript"  src="http://www.google.com/jsapi"></script>
	<script type="text/javascript">
	  google.load("jquery", "1.7.1", {uncompressed: true});
	</script>
	
	<script type="text/javascript" src="../jquery.log4jq.js"></script>
	<script>
	$(document).ready(function() {
		// set up subscription with context specified
		// for the callback function
		var customTarget = {
			name: "custom",
			version: "0.0.1",
			subscribed: true,
			$dom: $("div#console-log"),
			/*
			 * Appends an entry as formatted string into DOM
			 * 
			 * Parameters:
			 *		entry -   The entry to log.
			 */
			log: function log(entry) {
				var $rollingLog = $('p:last',customTarget.$dom);
				var msg = entry.format();
				$rollingLog.after("<p> CUSTOM: " + msg + "</p>");
			}
		};
		
		 var logger = $.configureLog4jq({
			enabled: true,
			level : "debug",
			targets : [
				{
					name: "alert",
					subscribed: false
				},
				{
					name: "console",
					subscribed: true
				},
				{
					name: "divInsert",
					subscribed: false
				},
				customTarget
			]
		});
		
		if (logger.subscribers().length !== 2) {
			var msg = "2 log targets must be subscribed";
			throw(msg);
		}
	
		$.debug("debug msg");
		$.info("info msg")
		$.warn("warning msg");
		$.error("error msg");
		
		$.debug({foo: "debug"});
		$.info({foo: "info"})
		$.warn({foo: "warn"});
		$.error({foo: "error"});
		
		$.debug("Debug", {foo: "debug"});
		$.info("Info", {foo: "info"})
		$.warn("Warning", {foo: "warn"});
		$.error("Error", {foo: "error"});
	});
	</script>
</head>
<body>
	<h3>jQuery Logger: Custom Log Target</h3>
	<div id="console-log" style="font-size: 14px;">
		<p id="receiver">Logs should appear here</p>
	</div>
</body>

</html>