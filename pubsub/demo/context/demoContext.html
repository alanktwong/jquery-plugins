<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<title>jQuery Publish/Subscribe: Context Demo Page</title>

<script type="text/javascript"  src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("jquery", "1.4.4", {uncompressed: true});
</script>

<script type="text/javascript" src="../../jquery.pubsub.js"></script>
<script>
$(document).ready(function() {
	var topic = "/data/context/example"
	// set up subscription with context specified
	// for the callback function
	$.subscribe( topic,
		$( "p#receiver" ),
		function( n ) {
			var msg = n.data.exampleText
			this.text( msg );
			console.log("subsciber received: " + msg);
		}
	);

	$.publish( topic, {
		data :{ exampleText: "if you see on page: foo bar baz, then it works" },
		progress: function() {
			console.log("begin topic");
		},
		done: function() {
			console.log("done topic");
		},
		fail: function() {
			console.log("fail topic");
		},
		always: function() {
			console.log("always topic");
		}
	});
});
</script>
</head>
<body>
	<h3>jQuery PubSub: Context Usage</h3>
	<div id="console-log" style="font-size: 14px;">
		<p id="receiver"></p>
		<p id="receiver2"></p>
	</div>
</body>

</html>