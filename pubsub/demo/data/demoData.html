<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<title>jQuery Publish/Subscribe: Data Demo Page</title>

<script type="text/javascript"  src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("jquery", "1.7.1", {uncompressed: true});
</script>

<script type="text/javascript" src="../../jquery.pubsub.js"></script>
<script>
$(document).ready(function() {
	var topic1  = "/dataexample/1";
	var topic2 = "/dataexample/2";
	// data can be expected as an object literal / hash
	$.subscribe( topic1, function( n ) {
		var msg =   topic1 + " : " + n.data.foo  ;
		$( "#receiver",'#console-log' ).append( msg );
		console.log(msg);
	});

	// or individual parameters.
	$.subscribe( topic2, function( n ) {
		var msg =  topic2 + " : " + n.data.param1 + n.data.param2 ;
		$( "#receiver2", '#console-log' ).append(msg);
		console.log(msg);
	});

	$.publishSync( topic1, {
		data : {foo: "bar" },
		progress: function() {
			console.log("begin topic1");
		},
		done: function() {
			console.log("done topic1");
		},
		fail: function() {
			console.log("fail topic1");
		},
		always: function() {
			console.log("always topic1");
		}
	});
	$.publishSync( topic2, {
		data : {param1 : "bar", param2: "baz"},
		progress: function() {
			console.log("begin topic2");
		},
		done: function() {
			console.log("done topic2");
		},
		fail: function() {
			console.log("fail topic2");
		},
		always: function() {
			console.log("always topic2");
		}
	});

});
</script>
</head>
<body>
	<h3>jQuery PubSub: Data Usage</h3>
	<div id="note">
		<p>Only synchronous part of demo works for co-publishing</p>
		<p>Asynchronous part of demo does not work for co-publishing</p>
	</div>
	<div id="console-log" style="font-size: 14px;">
		<p id="receiver"></p>
		<p id="receiver2"></p>
		<p id="receiver3"></p>
		<p id="receiver4"></p>
	</div>
</body>

</html>