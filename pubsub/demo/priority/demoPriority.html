<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<title>jQuery Publish/Subscribe: Priority Demo Page</title>

<script type="text/javascript"  src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("jquery", "1.4.4", {uncompressed: true});
</script>

<script type="text/javascript" src="../../../common.js"></script>
<script type="text/javascript" src="../../jquery.pubsub.js"></script>
<script>
$(document).ready(function() {

	// we can subscribe to a topic with a priority
	$.subscribe( "priorityexample", function( data ) {
		$( "p#receiver" ).append( "\nsecond highest priority: " + data.foo + "\n" );
	}, 2 );

	// we can use the highest priority possibly
	// keep other subscriptions from firing.
	$.subscribe( "priorityexample", function( data ) {
		$( "p#receiver" ).append( "\nhighest priority:" + data.foo + "\n" );
		if ( data.foo === "oops" ) {
			return false;
		}
	}, 1 );

	// the default priority is '10'.
	$.subscribe( "priorityexample", function( data ) {
		$( "p#receiver2" ).append( "default priority is 10: " + data.foo+ "\n" );
	});

	$.publish( "priorityexample", { foo: "bar" } );
	$.publish( "priorityexample", { foo: "oops" } );
});
</script>
</head>
<body>
	<h3>jQuery PubSub: Priority Usage</h3>
	<div id="console-log" style="font-size: 14px;">
		<p id="receiver"></p>
		<p id="receiver2"></p>
	</div>
</body>

</html>